import{m as q,j as e,L as k}from"./app-DD1_j264.js";import{B as o}from"./createLucideIcon-CJXjctMu.js";import{C as F,a as I,b as L,c as w,d as A}from"./card-DMpxeHKD.js";import{I as l}from"./input-cZgy-9z1.js";import{L as i}from"./label-D4qny3wm.js";import{S as m,a as h,b as u,c as x,d as p}from"./select-8dGr2CsA.js";import{A as D}from"./app-layout-BjO8UPhY.js";import{T as M}from"./index-CtBsO7PD.js";import"./index-D6cg2Mm3.js";import"./index-CR58GS18.js";import"./index-Db2yqOI4.js";import"./app-logo-DcjKhG5i.js";import"./pill-BS0WEZWH.js";function U({dosageForms:_=[],suppliers:v=[],activeIngredients:b=[]}){const{data:t,setData:d,post:f,processing:N,errors:a}=q({name:"",dosage_form_id:"",schedule:"",current_sale_price:"",supplier_id:"",reorder_level:"",quantity_on_hand:"",active_ingredients:[{id:"",strength:""}]}),c=r=>{d(r.target.name,r.target.value)},g=(r,s,n)=>{const j=[...t.active_ingredients];(s==="id"||s==="strength")&&(j[r][s]=n),d("active_ingredients",j)},C=()=>{d("active_ingredients",[...t.active_ingredients,{id:"",strength:""}])},y=r=>{d("active_ingredients",t.active_ingredients.filter((s,n)=>n!==r))},S=r=>{r.preventDefault(),f(M("manager.medications.store"))};return e.jsxs(D,{breadcrumbs:[{title:"Medications",href:"/manager/medications"},{title:"Create",href:"/manager/medications/create"}],children:[e.jsx(k,{title:"Add Medication"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl p-6",children:e.jsxs(F,{className:"rounded-none",children:[e.jsxs(I,{children:[e.jsx(L,{children:"Add New Medication"}),e.jsx(w,{children:"Enter details for a new medication."})]}),e.jsx(A,{children:e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",children:"Name"}),e.jsx(l,{id:"name",name:"name",value:t.name,onChange:c,required:!0,className:"bg-transparent dark:bg-transparent"}),a.name&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:a.name})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"dosage_form_id",children:"Dosage Form"}),e.jsxs(m,{value:t.dosage_form_id||void 0,onValueChange:r=>d("dosage_form_id",r),required:!0,children:[e.jsx(h,{className:"mt-1 w-full bg-transparent dark:bg-transparent",children:e.jsx(u,{placeholder:"Select Dosage Form"})}),e.jsx(x,{children:_.map(r=>e.jsx(p,{value:r.id.toString(),children:r.name},r.id))})]}),a.dosage_form_id&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:a.dosage_form_id})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"schedule",children:"Schedule"}),e.jsx(l,{id:"schedule",name:"schedule",type:"number",min:"0",max:"6",value:t.schedule,onChange:c,required:!0,className:"bg-transparent dark:bg-transparent"}),a.schedule&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:a.schedule})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"current_sale_price",children:"Sale Price"}),e.jsx(l,{id:"current_sale_price",name:"current_sale_price",type:"number",step:"0.01",value:t.current_sale_price,onChange:c,required:!0,className:"bg-transparent dark:bg-transparent"}),a.current_sale_price&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:a.current_sale_price})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"supplier_id",children:"Supplier"}),e.jsxs(m,{value:t.supplier_id||void 0,onValueChange:r=>d("supplier_id",r),required:!0,children:[e.jsx(h,{className:"mt-1 w-full bg-transparent dark:bg-transparent",children:e.jsx(u,{placeholder:"Select Supplier"})}),e.jsx(x,{children:v.map(r=>e.jsx(p,{value:r.id.toString(),children:r.name},r.id))})]}),a.supplier_id&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:a.supplier_id})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"reorder_level",children:"Reorder Level"}),e.jsx(l,{id:"reorder_level",name:"reorder_level",type:"number",value:t.reorder_level,onChange:c,required:!0,className:"bg-transparent dark:bg-transparent"}),a.reorder_level&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:a.reorder_level})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"quantity_on_hand",children:"Quantity On Hand"}),e.jsx(l,{id:"quantity_on_hand",name:"quantity_on_hand",type:"number",value:t.quantity_on_hand,onChange:c,required:!0,className:"bg-transparent dark:bg-transparent"}),a.quantity_on_hand&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:a.quantity_on_hand})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Ingredients"}),t.active_ingredients.map((r,s)=>e.jsxs("div",{className:"mb-2 flex items-center space-x-2",children:[e.jsxs(m,{value:r.id||void 0,onValueChange:n=>g(s,"id",n),required:!0,children:[e.jsx(h,{className:"w-64 rounded border bg-transparent px-2 py-1 dark:bg-transparent",children:e.jsx(u,{placeholder:"Select Ingredient"})}),e.jsx(x,{children:b.map(n=>e.jsx(p,{value:n.id.toString(),children:n.name},n.id))})]}),e.jsx(l,{value:r.strength,onChange:n=>g(s,"strength",n.target.value),placeholder:"Strength (e.g. 500mg)",required:!0,className:"bg-transparent dark:bg-transparent"}),t.active_ingredients.length>1&&e.jsx(o,{type:"button",variant:"destructive",onClick:()=>y(s),size:"icon",children:"Remove"})]},s)),e.jsx(o,{type:"button",onClick:C,variant:"secondary",children:"Add Ingredient"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(o,{type:"submit",disabled:N,children:"Save"})})]})})]})})]})}export{U as default};
