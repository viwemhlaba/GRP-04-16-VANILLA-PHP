import{m as C,j as e,L as N}from"./app-DD1_j264.js";import{B as o}from"./createLucideIcon-CJXjctMu.js";import{C as b,a as q,b as S,c as F,d as I}from"./card-DMpxeHKD.js";import{I as u}from"./input-cZgy-9z1.js";import{L as i}from"./label-D4qny3wm.js";import{A as L}from"./app-layout-BjO8UPhY.js";import{T as D}from"./index-CtBsO7PD.js";import"./index-D6cg2Mm3.js";import"./index-CR58GS18.js";import"./app-logo-DcjKhG5i.js";import"./pill-BS0WEZWH.js";function O({medication:r,dosageForms:x=[],suppliers:_=[],activeIngredients:g=[]}){const{data:d,setData:h,put:v,processing:m,errors:t}=C({name:(r==null?void 0:r.name)??"",dosage_form_id:r!=null&&r.dosage_form_id?String(r.dosage_form_id):"",schedule:(r==null?void 0:r.schedule)!==void 0?String(r.schedule):"",current_sale_price:(r==null?void 0:r.current_sale_price)!==void 0?String(r.current_sale_price):"",supplier_id:r!=null&&r.supplier_id?String(r.supplier_id):"",reorder_level:(r==null?void 0:r.reorder_level)!==void 0?String(r.reorder_level):"",quantity_on_hand:(r==null?void 0:r.quantity_on_hand)!==void 0?String(r.quantity_on_hand):"",active_ingredients:r!=null&&r.active_ingredients&&r.active_ingredients.length>0?r.active_ingredients.map(s=>({id:String(s.id),strength:s.strength||""})):[{id:"",strength:""}]}),a=s=>{h(s.target.name,s.target.value)},p=(s,l,n)=>{const c=[...d.active_ingredients];c[s][l]=n,h("active_ingredients",c)},j=()=>{h("active_ingredients",[...d.active_ingredients,{id:"",strength:""}])},f=s=>{const l=d.active_ingredients.filter((n,c)=>c!==s);h("active_ingredients",l)},y=s=>{s.preventDefault(),v(D("manager.medications.update",r.id))};return e.jsxs(L,{breadcrumbs:[{title:"Medications",href:"/manager/medications"},{title:"Edit",href:`/manager/medications/${r.id}/edit`}],children:[e.jsx(N,{title:"Edit Medication"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:e.jsx("div",{className:"w-full md:w-3/4",children:e.jsxs(b,{className:"rounded-none",children:[e.jsxs(q,{children:[e.jsx(S,{children:"Edit Medication"}),e.jsx(F,{children:"Update details for this medication."})]}),e.jsx(I,{children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",children:"Name"}),e.jsx(u,{id:"name",name:"name",value:d.name,onChange:a,required:!0}),t.name&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:t.name})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"dosage_form_id",children:"Dosage Form"}),e.jsxs("select",{id:"dosage_form_id",name:"dosage_form_id",value:d.dosage_form_id,onChange:a,required:!0,className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Select Dosage Form"}),x.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),t.dosage_form_id&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:t.dosage_form_id})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"schedule",children:"Schedule"}),e.jsx(u,{id:"schedule",name:"schedule",type:"number",min:"0",max:"6",value:d.schedule,onChange:a,required:!0}),t.schedule&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:t.schedule})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"current_sale_price",children:"Sale Price"}),e.jsx(u,{id:"current_sale_price",name:"current_sale_price",type:"number",step:"0.01",value:d.current_sale_price,onChange:a,required:!0}),t.current_sale_price&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:t.current_sale_price})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"supplier_id",children:"Supplier"}),e.jsxs("select",{id:"supplier_id",name:"supplier_id",value:d.supplier_id,onChange:a,required:!0,className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Select Supplier"}),_.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),t.supplier_id&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:t.supplier_id})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"reorder_level",children:"Reorder Level"}),e.jsx(u,{id:"reorder_level",name:"reorder_level",type:"number",value:d.reorder_level,onChange:a,required:!0}),t.reorder_level&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:t.reorder_level})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"quantity_on_hand",children:"Quantity On Hand"}),e.jsx(u,{id:"quantity_on_hand",name:"quantity_on_hand",type:"number",value:d.quantity_on_hand,onChange:a,required:!0}),t.quantity_on_hand&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:t.quantity_on_hand})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Ingredients"}),d.active_ingredients.map((s,l)=>e.jsxs("div",{className:"mb-2 flex items-center space-x-2",children:[e.jsxs("select",{value:s.id,onChange:n=>p(l,"id",n.target.value),required:!0,className:"rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Select Ingredient"}),g.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]}),e.jsx(u,{value:s.strength,onChange:n=>p(l,"strength",n.target.value),placeholder:"Strength (e.g. 500mg)",required:!0}),d.active_ingredients.length>1&&e.jsx(o,{type:"button",variant:"destructive",onClick:()=>f(l),size:"icon",children:"Remove"})]},l)),e.jsx(o,{type:"button",onClick:j,variant:"secondary",children:"Add Ingredient"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(o,{type:"submit",disabled:m,children:"Update"})})]})})]})})})]})}export{O as default};
