import{r as N,m as X,j as e,L as K,$ as Z}from"./app-DD1_j264.js";import{A as ee,d as se,e as ae,f as re,X as C}from"./app-layout-BjO8UPhY.js";import{B as z}from"./badge-PeB8ie60.js";import{B as u}from"./createLucideIcon-CJXjctMu.js";import{C as x,d as h,a as p,b as g}from"./card-DMpxeHKD.js";import{I as o}from"./input-cZgy-9z1.js";import{L as c}from"./label-D4qny3wm.js";import{S as v,a as y,b as _,c as b,d as j}from"./select-8dGr2CsA.js";import{T as ie}from"./textarea-3mhvGArJ.js";import{U as te}from"./upload-D1m6XBpD.js";import{P as ne}from"./plus-CWERYZzN.js";import"./index-D6cg2Mm3.js";import"./index-CR58GS18.js";import"./app-logo-DcjKhG5i.js";import"./pill-BS0WEZWH.js";import"./index-Db2yqOI4.js";const Ne=({pharmacist:r,pharmacies:E,specialization_options:F,language_options:R,license_status_options:I})=>{var A;const P=N.useRef(null),[L,U]=N.useState(null),[d,S]=N.useState({}),{data:i,setData:n,post:k,processing:w,errors:a}=X({surname:r.surname||"",id_number:r.id_number||"",phone_number:r.phone_number||"",registration_number:r.registration_number||"",registration_date:r.registration_date||"",bio:r.bio||"",specializations:r.specializations||[],certifications:r.certifications||[],qualification:r.qualification||"",university:r.university||"",graduation_year:r.graduation_year||"",years_experience:r.years_experience||0,languages:r.languages||[],license_status:r.license_status||"active",license_expiry:r.license_expiry||"",pharmacy_id:r.pharmacy_id?r.pharmacy_id.toString():"none",avatar:null}),D=s=>s?/^\d{13}$/.test(s)?null:"ID number must be exactly 13 digits":null,q=s=>s?/^(\+27|0)?[6-8][0-9]{8}$/.test(s.replace(/\s/g,""))?null:"Please enter a valid South African phone number (e.g., 0821234567 or +27821234567)":null,B=s=>s?/^A\d{5,6}$/.test(s)?null:"Registration number must be in South African format (e.g., A12345 or A123456)":null,$=()=>{const s={},t=D(i.id_number);t&&(s.id_number=t);const l=q(i.phone_number);l&&(s.phone_number=l);const m=B(i.registration_number);return m&&(s.registration_number=m),S(s),Object.keys(s).length===0},f=(s,t)=>{n(s,t),d[s]&&S(l=>{const m={...l};return delete m[s],m})},T=s=>{s.preventDefault(),$()&&(console.log("Form data being sent:",i),k(route("pharmacist.profile.update.post"),{onSuccess:()=>{console.log("Update successful")},onError:t=>{console.log("Update errors:",t)}}))},V=s=>{var l;const t=(l=s.target.files)==null?void 0:l[0];if(t){n("avatar",t);const m=URL.createObjectURL(t);U(m)}},G=s=>{i.specializations.includes(s)||n("specializations",[...i.specializations,s])},O=s=>{n("specializations",i.specializations.filter((t,l)=>l!==s))},Y=s=>{i.languages.includes(s)||n("languages",[...i.languages,s])},M=s=>{n("languages",i.languages.filter((t,l)=>l!==s))},H=()=>{n("certifications",[...i.certifications,""])},J=(s,t)=>{const l=[...i.certifications];l[s]=t,n("certifications",l)},Q=s=>{n("certifications",i.certifications.filter((t,l)=>l!==s))},W=[{title:"Profile",href:route("pharmacist.profile")},{title:r.profile_completed?"Edit Profile":"Complete Profile",href:"#"}];return e.jsxs(ee,{breadcrumbs:W,children:[e.jsx(K,{title:r.profile_completed?"Edit Pharmacist Profile":"Complete Your Profile"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:r.profile_completed?"Edit Profile":"Complete Profile"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:r.profile_completed?"Update your professional and personal information.":"Provide your professional and personal details to finish onboarding."})]}),!r.profile_completed&&e.jsx(x,{className:"rounded-none border-blue-200 bg-blue-50",children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-100",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900",children:"Welcome to the e-Prescription System!"}),e.jsx("p",{className:"text-blue-800",children:"Please complete your profile to get started. This information helps us provide you with the best experience and ensures proper identification."})]})]})})}),e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsxs(x,{className:"rounded-none",children:[e.jsx(p,{children:e.jsx(g,{children:"Profile Picture"})}),e.jsx(h,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(se,{className:"h-20 w-20",children:[e.jsx(ae,{src:L||r.avatar,alt:`${r.name} ${r.surname||""}`}),e.jsxs(re,{className:"text-lg",children:[r.name.charAt(0),((A=r.surname)==null?void 0:A.charAt(0))||""]})]}),e.jsxs("div",{children:[e.jsxs(u,{type:"button",variant:"outline",onClick:()=>{var s;return(s=P.current)==null?void 0:s.click()},children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"Upload New Picture"]}),e.jsx("input",{ref:P,type:"file",accept:"image/*",onChange:V,className:"hidden"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"JPG, PNG, GIF up to 2MB"}),a.avatar&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.avatar})]})]})})]}),e.jsxs(x,{className:"rounded-none",children:[e.jsx(p,{children:e.jsx(g,{children:"Personal Details"})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"name",children:"Name *"}),e.jsx(o,{id:"name",value:r.name,readOnly:!0,disabled:!0,className:"cursor-not-allowed bg-gray-50 text-gray-500"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Name cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"surname",children:"Surname"}),e.jsx(o,{id:"surname",value:i.surname,onChange:s=>f("surname",s.target.value)}),a.surname&&e.jsx("p",{className:"text-sm text-red-600",children:a.surname})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"email",children:"Email Address *"}),e.jsx(o,{id:"email",type:"email",value:r.email,readOnly:!0,disabled:!0,className:"cursor-not-allowed bg-gray-50 text-gray-500"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Email cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"phone_number",children:"Phone Number"}),e.jsx(o,{id:"phone_number",value:i.phone_number,onChange:s=>f("phone_number",s.target.value),placeholder:"0821234567 or +27821234567"}),(d.phone_number||a.phone_number)&&e.jsx("p",{className:"text-sm text-red-600",children:d.phone_number||a.phone_number})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"id_number",children:"ID Number"}),e.jsx(o,{id:"id_number",value:i.id_number,onChange:s=>f("id_number",s.target.value),placeholder:"Enter 13-digit ID number",maxLength:13}),(d.id_number||a.id_number)&&e.jsx("p",{className:"text-sm text-red-600",children:d.id_number||a.id_number})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"bio",children:"Bio"}),e.jsx(ie,{id:"bio",value:i.bio,onChange:s=>n("bio",s.target.value),rows:3,placeholder:"Tell us about yourself..."}),a.bio&&e.jsx("p",{className:"text-sm text-red-600",children:a.bio})]})]})]}),e.jsxs(x,{className:"rounded-none",children:[e.jsx(p,{children:e.jsx(g,{children:"Professional Details"})}),e.jsx(h,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"registration_number",children:"Registration Number"}),e.jsx(o,{id:"registration_number",value:i.registration_number,onChange:s=>f("registration_number",s.target.value),placeholder:"A12345 or A123456"}),(d.registration_number||a.registration_number)&&e.jsx("p",{className:"text-sm text-red-600",children:d.registration_number||a.registration_number})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"registration_date",children:"Registration Date"}),e.jsx(o,{id:"registration_date",type:"date",value:i.registration_date,onChange:s=>n("registration_date",s.target.value)}),a.registration_date&&e.jsx("p",{className:"text-sm text-red-600",children:a.registration_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"qualification",children:"Qualification"}),e.jsx(o,{id:"qualification",value:i.qualification,onChange:s=>n("qualification",s.target.value),placeholder:"e.g., Bachelor of Pharmacy"}),a.qualification&&e.jsx("p",{className:"text-sm text-red-600",children:a.qualification})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"university",children:"University"}),e.jsx(o,{id:"university",value:i.university,onChange:s=>n("university",s.target.value)}),a.university&&e.jsx("p",{className:"text-sm text-red-600",children:a.university})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"graduation_year",children:"Graduation Year"}),e.jsx(o,{id:"graduation_year",type:"number",min:"1950",max:new Date().getFullYear()+5,value:i.graduation_year,onChange:s=>n("graduation_year",parseInt(s.target.value)||"")}),a.graduation_year&&e.jsx("p",{className:"text-sm text-red-600",children:a.graduation_year})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"years_experience",children:"Years of Experience"}),e.jsx(o,{id:"years_experience",type:"number",min:"0",max:"60",value:i.years_experience,onChange:s=>n("years_experience",parseInt(s.target.value)||0)}),a.years_experience&&e.jsx("p",{className:"text-sm text-red-600",children:a.years_experience})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"license_status",children:"License Status"}),e.jsxs(v,{value:i.license_status,onValueChange:s=>n("license_status",s),children:[e.jsx(y,{children:e.jsx(_,{placeholder:"Select license status"})}),e.jsx(b,{children:I.map(s=>e.jsx(j,{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),a.license_status&&e.jsx("p",{className:"text-sm text-red-600",children:a.license_status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"license_expiry",children:"License Expiry Date"}),e.jsx(o,{id:"license_expiry",type:"date",value:i.license_expiry,onChange:s=>n("license_expiry",s.target.value)}),a.license_expiry&&e.jsx("p",{className:"text-sm text-red-600",children:a.license_expiry})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"pharmacy_id",children:"Assigned Pharmacy"}),e.jsxs(v,{value:i.pharmacy_id,onValueChange:s=>n("pharmacy_id",s),children:[e.jsx(y,{children:e.jsx(_,{placeholder:"Select a pharmacy"})}),e.jsxs(b,{children:[e.jsx(j,{value:"none",children:"No pharmacy assigned"}),E.map(s=>e.jsxs(j,{value:s.id.toString(),children:[s.name,s.physical_address&&e.jsx("span",{className:"block text-sm text-gray-500",children:s.physical_address})]},s.id))]})]}),a.pharmacy_id&&e.jsx("p",{className:"text-sm text-red-600",children:a.pharmacy_id})]})]})})]}),e.jsxs(x,{className:"rounded-none",children:[e.jsx(p,{children:e.jsx(g,{children:"Specializations"})}),e.jsxs(h,{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:i.specializations.map((s,t)=>e.jsxs(z,{variant:"secondary",className:"flex items-center gap-1",children:[s,e.jsx(u,{type:"button",variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground h-auto p-0",onClick:()=>O(t),children:e.jsx(C,{className:"h-3 w-3"})})]},t))}),e.jsxs(v,{onValueChange:G,children:[e.jsx(y,{children:e.jsx(_,{placeholder:"Add a specialization"})}),e.jsx(b,{children:F.filter(s=>!i.specializations.includes(s)).map(s=>e.jsx(j,{value:s,children:s},s))})]}),a.specializations&&e.jsx("p",{className:"text-sm text-red-600",children:a.specializations})]})]}),e.jsxs(x,{className:"rounded-none",children:[e.jsx(p,{children:e.jsx(g,{children:"Languages"})}),e.jsxs(h,{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:i.languages.map((s,t)=>e.jsxs(z,{variant:"outline",className:"flex items-center gap-1",children:[s,e.jsx(u,{type:"button",variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground h-auto p-0",onClick:()=>M(t),children:e.jsx(C,{className:"h-3 w-3"})})]},t))}),e.jsxs(v,{onValueChange:Y,children:[e.jsx(y,{children:e.jsx(_,{placeholder:"Add a language"})}),e.jsx(b,{children:R.filter(s=>!i.languages.includes(s)).map(s=>e.jsx(j,{value:s,children:s},s))})]}),a.languages&&e.jsx("p",{className:"text-sm text-red-600",children:a.languages})]})]}),e.jsxs(x,{className:"rounded-none",children:[e.jsx(p,{children:e.jsx(g,{children:"Certifications"})}),e.jsxs(h,{className:"space-y-4",children:[i.certifications.map((s,t)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{value:s,onChange:l=>J(t,l.target.value),placeholder:"Enter certification name",className:"flex-1"}),e.jsx(u,{type:"button",variant:"outline",size:"sm",onClick:()=>Q(t),children:e.jsx(C,{className:"h-4 w-4"})})]},t)),e.jsxs(u,{type:"button",variant:"outline",onClick:H,className:"w-full",children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Add Certification"]}),a.certifications&&e.jsx("p",{className:"text-sm text-red-600",children:a.certifications})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[r.profile_completed&&e.jsx(u,{variant:"outline",type:"button",asChild:!0,children:e.jsx(Z,{href:route("pharmacist.profile"),children:"Cancel"})}),e.jsx(u,{type:"submit",disabled:w,children:w?"Saving...":r.profile_completed?"Save Changes":"Complete Profile & Get Started"})]})]})]})]})};export{Ne as default};
