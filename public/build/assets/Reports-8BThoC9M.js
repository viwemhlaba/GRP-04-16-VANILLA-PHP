import{m as b,j as e,L as y,$ as c}from"./app-DD1_j264.js";import{B as r}from"./badge-PeB8ie60.js";import{B as l}from"./createLucideIcon-CJXjctMu.js";import{C as i,a as o,b as x,c as m,d}from"./card-DMpxeHKD.js";import{T as v,a as R,b as h,c as a,d as w,e as t}from"./table-Bx2kdRqw.js";import{A as T,F as j,t as p}from"./app-layout-BjO8UPhY.js";import{D as C}from"./download-C1qKmiEZ.js";import{T as _}from"./trash-2-2fdkUjjd.js";import"./index-D6cg2Mm3.js";import"./index-CR58GS18.js";import"./app-logo-DcjKhG5i.js";import"./pill-BS0WEZWH.js";function M({recentReports:n}){const{delete:u,processing:f}=b(),N=s=>{confirm("Are you sure you want to delete this report? This action cannot be undone.")&&u(route("pharmacist.reports.delete",s),{onSuccess:()=>{p.success("Report deleted successfully")},onError:()=>{p.error("Failed to delete report")}})},g=[{title:"Reports",href:route("pharmacist.reports")}];return e.jsxs(T,{breadcrumbs:g,children:[e.jsx(y,{title:"Reports"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Reports"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Generate and manage pharmacy activity reports."})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-12",children:[e.jsxs(i,{className:"self-start rounded-none lg:col-span-4 xl:col-span-3",children:[e.jsxs(o,{className:"pb-4",children:[e.jsx(x,{className:"text-lg font-medium",children:"Generate Reports"}),e.jsx(m,{children:"Select a report type."})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Dispensed Medications"}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"PDF for a chosen date range."}),e.jsx(l,{asChild:!0,size:"sm",className:"w-full",children:e.jsx(c,{href:route("pharmacist.reports.dispensed"),children:"Generate"})})]})})})]}),e.jsx("div",{className:"flex flex-col gap-6 lg:col-span-8 xl:col-span-9",children:n.length>0?e.jsxs(i,{className:"rounded-none",children:[e.jsxs(o,{children:[e.jsxs(x,{className:"flex items-center gap-2 text-lg font-medium",children:[e.jsx(j,{className:"h-5 w-5"})," Recent Reports"]}),e.jsx(m,{children:"Previously generated (auto-deleted after 30 days)."})]}),e.jsx(d,{children:e.jsx("div",{className:"overflow-x-auto border-y",children:e.jsxs(v,{children:[e.jsx(R,{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs(h,{children:[e.jsx(a,{children:"Report"}),e.jsx(a,{children:"Date Range"}),e.jsx(a,{children:"Generated"}),e.jsx(a,{children:"Size"}),e.jsx(a,{children:"Downloads"}),e.jsx(a,{children:"Status"}),e.jsx(a,{className:"text-right",children:"Actions"})]})}),e.jsx(w,{children:n.map(s=>e.jsxs(h,{children:[e.jsx(t,{className:"font-medium",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold",children:s.title}),e.jsxs("span",{className:"text-muted-foreground text-xs",children:["Grouped by ",s.parameters.group_by]})]})}),e.jsxs(t,{className:"text-sm",children:[s.parameters.start_date," â€“ ",s.parameters.end_date]}),e.jsx(t,{className:"text-sm",children:s.generated_at}),e.jsx(t,{className:"text-sm",children:s.file_size}),e.jsx(t,{className:"text-sm",children:s.download_count}),e.jsx(t,{children:s.file_exists?s.is_expired?e.jsx(r,{variant:"secondary",children:"Expired"}):e.jsx(r,{variant:"default",children:"Available"}):e.jsx(r,{variant:"destructive",children:"Missing"})}),e.jsx(t,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.file_exists&&!s.is_expired&&e.jsx(l,{size:"sm",variant:"outline",asChild:!0,children:e.jsx(c,{href:route("pharmacist.reports.download",s.id),children:e.jsx(C,{className:"h-4 w-4"})})}),e.jsx(l,{size:"sm",variant:"destructive",onClick:()=>N(s.id),disabled:f,children:e.jsx(_,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]}):e.jsx(i,{className:"rounded-none",children:e.jsxs(d,{className:"py-12 text-center",children:[e.jsx(j,{className:"text-muted-foreground mx-auto h-12 w-12"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No Reports Yet"}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:"Generate your first dispensed report to see it here."})]})})})]})]})]})}export{M as default};
