import{r as j,j as e,L as f,$ as c}from"./app-DD1_j264.js";import{B as i}from"./createLucideIcon-CJXjctMu.js";import{C as b,a as v,b as g,c as N,d as C}from"./card-DMpxeHKD.js";import{I as _}from"./input-cZgy-9z1.js";import{T as w,a as D,b as p,c as a,d as L,e as t}from"./table-Bx2kdRqw.js";import{A as P}from"./app-layout-BjO8UPhY.js";import"./index-D6cg2Mm3.js";import"./index-CR58GS18.js";import"./app-logo-DcjKhG5i.js";import"./pill-BS0WEZWH.js";function E({prescriptions:m}){const[r,x]=j.useState(""),n=m.filter(s=>{var d,l,o;return s.status==="approved"&&s.repeats_used<s.repeats_total&&(((d=s.prescription_name)==null?void 0:d.toLowerCase().includes(r.toLowerCase()))||((l=s.customer_name)==null?void 0:l.toLowerCase().includes(r.toLowerCase()))||((o=s.patient_id_number)==null?void 0:o.toLowerCase().includes(r.toLowerCase())))}),h=s=>s.status==="approved"&&s.repeats_used<s.repeats_total,u=[{title:"Prescriptions",href:route("pharmacist.prescriptions.index")},{title:"Dispense",href:route("pharmacist.prescriptions.dispense")}];return e.jsxs(P,{breadcrumbs:u,children:[e.jsx(f,{title:"Dispense Prescriptions"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Dispense Prescriptions"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Review and dispense approved prescriptions to patients."})]}),e.jsxs(b,{className:"rounded-none",children:[e.jsxs(v,{children:[e.jsx(g,{children:"Available Prescriptions for Dispensing"}),e.jsx(N,{children:"Select prescriptions that are ready to be dispensed to patients."})]}),e.jsxs(C,{children:[e.jsx("div",{className:"mb-4 max-w-md",children:e.jsx(_,{placeholder:"Search by prescription name, customer, or patient ID...",value:r,onChange:s=>x(s.target.value)})}),n.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"No prescriptions available for dispensing."}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:"Prescriptions must be approved and have remaining repeats."})]}):e.jsx("div",{className:"overflow-x-auto border-y",children:e.jsxs(w,{children:[e.jsx(D,{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs(p,{children:[e.jsx(a,{children:"Patient"}),e.jsx(a,{children:"Prescription"}),e.jsx(a,{children:"Patient ID"}),e.jsx(a,{children:"Repeats"}),e.jsx(a,{children:"Upload Date"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(L,{children:n.map(s=>e.jsxs(p,{children:[e.jsx(t,{className:"font-medium",children:s.customer_name||"Unknown"}),e.jsx(t,{children:s.prescription_name||"N/A"}),e.jsx(t,{children:s.patient_id_number||"N/A"}),e.jsx(t,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[s.repeats_used," of ",s.repeats_total," used"]}),s.repeats_used>=s.repeats_total&&e.jsx("div",{className:"text-xs text-red-600",children:"No repeats remaining"})]})}),e.jsx(t,{children:new Date(s.upload_date).toLocaleDateString()}),e.jsx(t,{children:e.jsxs("div",{className:"flex gap-2",children:[h(s)?e.jsx(i,{size:"sm",asChild:!0,children:e.jsx(c,{href:route("pharmacist.prescriptions.dispense.show",s.id),children:"Dispense"})}):e.jsx(i,{size:"sm",variant:"outline",disabled:!0,children:"Cannot Dispense"}),e.jsx(i,{size:"sm",variant:"outline",asChild:!0,children:e.jsx(c,{href:route("pharmacist.prescriptions.show",s.id),children:"View"})})]})})]},s.id))})]})})]})]})]})]})}export{E as default};
